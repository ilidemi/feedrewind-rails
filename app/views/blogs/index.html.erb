<h1>Blogs</h1>

<% if @blogs.length.zero? %>
  <p>Nothing here. Want to add some?</p>
<% end %>

<% @blogs.each do |blog| %>
  <% total_count = blog.posts.count %>
  <% sent_count = blog.posts.group(:is_sent).count[true] || 0 %>
  <div style="display:flex; justify-content:space-between">
    <span>
      <%= link_to blog.name, blog %> (<a href="<%= BlogsHelper.feed_url(request, blog) %>">feed</a>)
    </span>

    <span>
      <span style="margin-right: 1em"><%= sent_count %>/<%= total_count %> sent</span>
      <%= link_to "Delete", blog_path(blog),
                  method: :delete,
                  data: { confirm: "Delete #{blog.name}?" } %>
    </span>
  </div>
<% end %>

<%= link_to "Add blog", new_blog_path %>